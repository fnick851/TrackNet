<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TrackNet: Bubbles View</title>
<script type="text/javascript" src="../lib/d3.min.js"></script>
<script type="text/javascript" src="../lib/d3-transform.js"></script>
<script type="text/javascript" src="../lib/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="jquery-ui.min.js"></script>
<link href="jquery-ui.min.css" rel="stylesheet">
<link href="bubbles.css" rel="stylesheet">
</head>
<body>
<script type="text/javascript" src="bubbles.js"></script>
<div id="tabs">
    <ul>
        <li><a href="#tab1">Website</a></li>
        <li><a href="#tab2">Category</a></li>
    </ul>
    <div id="tab1">
        <input id="search-domain" size=30 title="Type a domain name.">
        You are now exploring <font id="current-domain" color="blue"></font>.
    </div>
    <div id="tab2">
        <input id="search-category" size=30 title="Type a category.">
        You are now exploring <font id="current-category" color="blue"></font>.
    </div>
</div>
<script type="text/javascript">
    
    d3.json("data/851.adjacency.json", function(error, data) {
        completeData = data;
        
        $("#tabs").tabs({
            activate: function(event, ui) {
                if (ui.newTab.context.innerText == "Website") {
                    viewType = "domain";
                    loadData(domainId);
                } else if (ui.newTab.context.innerText == "Category") {
                    viewType = "category";
                    loadData(categoryId);
                }
                drawGraph();
            }
        });
        
        var domains = [];
        for (var id in completeData.firstPartyDomains) {
            domains.push({ "label": completeData.domainList[id], "id": id });
        }
        $("#search-domain").autocomplete({
            source: domains,
            select: function(event, ui) {
                domainId = ui.item.id;
                loadData(domainId);
                drawGraph();
            }
        });
        
        var categories = [];
        for (var id in completeData.firstPartyCategories) {
            categories.push({ "label": completeData.catList[id], "id": id });
        }
        $("#search-category").autocomplete({
            source: categories,
            select: function(event, ui) {
                categoryId = ui.item.id;
                loadData(categoryId);
                drawGraph();
            }
        });

        svg = d3.select("#tabs")
                .append("svg")
                .attr("width", 1500)
                .attr("height", 550);
        viewType = "domain";
        domainId = 1004;
        categoryId = 19;
        loadData(domainId);
        drawGraph();
        svg.append("rect")
           .attr("width", 5)
           .attr("height", 5);
        svg.append("rect")
           .attr("y", 545)
           .attr("width", 5)
           .attr("height", 5);
    });
</script>
</body>
</html>